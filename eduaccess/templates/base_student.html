<!DOCTYPE html>
<html lang="es" class="transition-colors duration-200">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>{% block title %}EduAccess{% endblock %}</title>

<!-- ðŸŒ™ DARK MODE PERSISTENTE -->
<script>
(function () {
  if (localStorage.getItem("darkMode") === "true") {
      document.documentElement.classList.add("dark");
  }
})();
</script>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

<script>
tailwind.config = {
    darkMode: "class",
    theme: {
        extend: {
            colors: {
                primary: "#3b82f6",
                "primary-dark": "#1d4ed8",
                "accent": "#4f46e5",
                "background-light": "#f0f2f5",
                "background-dark": "#111827",
                "text-light": "#1f2937",
                "text-dark": "#f9fafb",
            },
            fontFamily: {
                display: ["Inter", "sans-serif"],
            }
        },
    },
};
</script>

{% block extra_head %}{% endblock %}
<style>

/* TAMAÃ‘OS DE FUENTE */
body.font-size-1 { font-size: 12px !important; }
body.font-size-2 { font-size: 14px !important; }
body.font-size-3 { font-size: 16px !important; }
body.font-size-4 { font-size: 18px !important; }
body.font-size-5 { font-size: 20px !important; }

body.font-size-1 h1 { font-size: 1.5rem !important; }
body.font-size-2 h1 { font-size: 1.75rem !important; }
body.font-size-3 h1 { font-size: 2rem !important; }
body.font-size-4 h1 { font-size: 2.25rem !important; }
body.font-size-5 h1 { font-size: 2.5rem !important; }

body.font-size-1 h2 { font-size: 1.3rem !important; }
body.font-size-2 h2 { font-size: 1.5rem !important; }
body.font-size-3 h2 { font-size: 1.75rem !important; }
body.font-size-4 h2 { font-size: 2rem !important; }
body.font-size-5 h2 { font-size: 2.25rem !important; }

body.font-size-1 h3 { font-size: 1.1rem !important; }
body.font-size-2 h3 { font-size: 1.25rem !important; }
body.font-size-3 h3 { font-size: 1.5rem !important; }
body.font-size-4 h3 { font-size: 1.75rem !important; }
body.font-size-5 h3 { font-size: 2rem !important; }

/* ============================= */
/* ðŸ”¥ FIX REAL DEL ALTO CONTRASTE */
/* ============================= */

/* Fondo general */
html.high-contrast-mode,
html.high-contrast-mode body,
body.high-contrast {
    background-color: #000000 !important;
    color: #FFFF00 !important;
}

/* ðŸŽ¯ FONDO SOLO A CONTENEDORES, NO A ELEMENTOS INTERNOS */
html.high-contrast-mode body,
html.high-contrast-mode main,
html.high-contrast-mode section,
html.high-contrast-mode article,
html.high-contrast-mode aside,
html.high-contrast-mode header,
html.high-contrast-mode nav,
html.high-contrast-mode footer,
html.high-contrast-mode div:not(button):not(a):not(span) {
    background-color: #000000 !important;
    color: #FFFF00 !important;
}


/* â­ TODOS LOS BACKGROUNDS A NEGRO (SIN ROMPER PORTADAS) â­ */
html.high-contrast-mode [class*="bg-"]:not(.course-image),
body.high-contrast [class*="bg-"]:not(.course-image) {
    background-color: #000000 !important;
}

/* NAVBAR Y SIDEBAR */
html.high-contrast-mode nav,
html.high-contrast-mode header,
html.high-contrast-mode aside,
body.high-contrast nav,
body.high-contrast header,
body.high-contrast aside {
    background-color: #000000 !important;
    border: 2px solid #FFFF00 !important;
}

/* BOTONES */
html.high-contrast-mode button,
body.high-contrast button {
    background-color: #FFFF00 !important;
    color: #000000 !important;
    border: 3px solid #FFFFFF !important;
    font-weight: bold !important;
}

html.high-contrast-mode button:hover,
body.high-contrast button:hover {
    background-color: #FFFFFF !important;
    color: #000000 !important;
    border: 3px solid #FFFF00 !important;
}

/* LINKS */
html.high-contrast-mode a,
body.high-contrast a {
    color: #00FFFF !important;
    text-decoration: underline !important;
}

/* FORMULARIOS */
html.high-contrast-mode input,
html.high-contrast-mode select,
html.high-contrast-mode textarea,
body.high-contrast input,
body.high-contrast select,
body.high-contrast textarea {
    background-color: #000000 !important;
    color: #FFFF00 !important;
    border: 2px solid #FFFF00 !important;
}

/* PROGRESS */
html.high-contrast-mode [class*="progress"],
body.high-contrast [class*="progress"] {
    background-color: #1A1A1A !important;
    border: 2px solid #FFFF00 !important;
}
html.high-contrast-mode [class*="progress"] > *,
body.high-contrast [class*="progress"] > * {
    background-color: #FFFF00 !important;
}

/* ICONOS */
html.high-contrast-mode svg,
html.high-contrast-mode .material-symbols-outlined,
body.high-contrast svg,
body.high-contrast .material-symbols-outlined {
    fill: #FFFF00 !important;
    color: #FFFF00 !important;
}

/* FOCUS WCAG */
html.high-contrast-mode *:focus,
body.high-contrast *:focus {
    outline: 3px solid #00FFFF !important;
    outline-offset: 2px !important;
}

/* ðŸš¨ CLAVE: RESTAURAR IMÃGENES ðŸš¨ */
.high-contrast img,
.high-contrast video {
    background: transparent !important;
    filter: none !important;
}

/* CONTENEDOR DE PORTADAS */
.course-image {
    background: transparent !important;
}

/* 1. MATA ABSOLUTAMENTE TODAS LAS SOMBRAS Y ANILLOS DE TAILWIND */
    html.high-contrast-mode * {
        --tw-ring-shadow: 0 0 transparent !important;
        --tw-ring-offset-shadow: 0 0 transparent !important;
        --tw-shadow: 0 0 transparent !important;
        --tw-shadow-colored: 0 0 transparent !important;
        box-shadow: none !important;
        text-shadow: none !important;
        transition: none !important; /* Evita parpadeos de color */
        -webkit-tap-highlight-color: transparent !important; /* Quita el cuadro negro en mÃ³viles/tÃ¡ctil */
    }

    html.high-contrast-mode,
    html.high-contrast-mode body,
    html.high-contrast-mode div:not(img),
    html.high-contrast-mode main,
    html.high-contrast-mode header,
    html.high-contrast-mode nav,
    html.high-contrast-mode aside,
    html.high-contrast-mode section,
    html.high-contrast-mode article {
        background-color: #000000 !important;
        background-image: none !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    /* 1.5 Revelar las imÃ¡genes de los cursos eliminando velos oscuros */
    html.high-contrast-mode .bg-gradient-to-t,
    html.high-contrast-mode .inset-0,
    html.high-contrast-mode .absolute.inset-0 {
        background: transparent !important;
        background-image: none !important;
    }

    /* 2. TEXTOS BLANCOS */
    html.high-contrast-mode h1, html.high-contrast-mode h2, html.high-contrast-mode h3,
    html.high-contrast-mode h4, html.high-contrast-mode p, html.high-contrast-mode span:not(.material-symbols-outlined),
    html.high-contrast-mode ul, html.high-contrast-mode li {
        color: #FFFFFF !important;
    }

    /* 3. BOTONES ESTADO NORMAL (Fondo negro, texto/borde amarillo) */
    html.high-contrast-mode a,
    html.high-contrast-mode button,
    html.high-contrast-mode a[class],
    html.high-contrast-mode button[class],
    html.high-contrast-mode [role="menuitem"],
    html.high-contrast-mode input[type="submit"] {
        background: #000000 !important;
        background-color: #000000 !important;
        background-image: none !important;
        color: #FFFF00 !important;
        border: 2px solid #FFFF00 !important;
        outline: none !important;
    }

html.high-contrast-mode a *,
html.high-contrast-mode button *,
html.high-contrast-mode [role="menuitem"] * {
    color: inherit !important;   /* ðŸ”¥ CAMBIO CLAVE */
    background: transparent !important;
    background-color: transparent !important;
    border-color: transparent !important;
}


    /* 4. BOTONES ESTADO CLICK/HOVER (Fondo amarillo brillante, texto negro puro) */
    html.high-contrast-mode a:hover,
    html.high-contrast-mode a:focus,
    html.high-contrast-mode a:active,
    html.high-contrast-mode button:hover,
    html.high-contrast-mode button:focus,
    html.high-contrast-mode button:active,
    html.high-contrast-mode [role="menuitem"]:hover,
    html.high-contrast-mode [role="menuitem"]:focus,
    html.high-contrast-mode input[type="submit"]:hover {
        background: #FFFF00 !important;
        background-color: #FFFF00 !important;
        background-image: none !important;
        color: #000000 !important;
        border-color: #FFFF00 !important;
    }

    /* Textos/Iconos internos cambian a negro al hacer click */
    html.high-contrast-mode a:hover *,
    html.high-contrast-mode a:focus *,
    html.high-contrast-mode a:active *,
    html.high-contrast-mode button:hover *,
    html.high-contrast-mode button:focus *,
    html.high-contrast-mode button:active *,
    html.high-contrast-mode [role="menuitem"]:hover * {
        color: #000000 !important;
    }

    /* 5. MULTIMEDIA E IMÃGENES */
    html.high-contrast-mode img,
    html.high-contrast-mode iframe,
    html.high-contrast-mode video {
        border: 3px solid #00FFFF !important;
        background-color: transparent !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    /* 6. BARRAS DE PROGRESO */
    html.high-contrast-mode .rounded-full.bg-gray-200,
    html.high-contrast-mode .rounded-full.dark\:bg-gray-700 {
        background: #000000 !important;
        background-color: #000000 !important;
        border: 2px solid #FFFFFF !important;
    }
    html.high-contrast-mode .rounded-full > div[style] {
        background: #FFFF00 !important;
        background-color: #FFFF00 !important;
        background-image: none !important;
    }

    /* 7. SWITCH DE ALTO CONTRASTE */
    html.high-contrast-mode #contrastStatus {
        border: 2px solid #FFFF00 !important;
        background: #000000 !important;
    }
    html.high-contrast-mode #contrastStatus .dot {
        background: #FFFF00 !important;
    }

</style>
</head>

<body class="
bg-background-light dark:bg-background-dark
font-display text-text-light dark:text-text-dark
min-h-screen flex flex-col transition-all duration-300
{% if accessibility.high_contrast %}high-contrast high-contrast-mode{% endif %}
font-size-{{ accessibility.font_size|default:'3' }}
">

{% include "components/navbar_student.html" %}
{% block content %}{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const highContrast = {{ accessibility.high_contrast|yesno:"true,false" }};
    if (highContrast) {
        document.documentElement.classList.add('high-contrast-mode');
    }
});
</script>

</body>
</html>
