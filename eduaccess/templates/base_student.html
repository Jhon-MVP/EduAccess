<!DOCTYPE html>
<html lang="es" class="transition-colors duration-200">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>{% block title %}EduAccess{% endblock %}</title>

<!-- üåô DARK MODE PERSISTENTE -->
<script>
(function () {
  if (localStorage.getItem("darkMode") === "true") {
      document.documentElement.classList.add("dark");
  }
})();
</script>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

<script>
tailwind.config = {
    darkMode: "class",
    theme: {
        extend: {
            colors: {
                primary: "#3b82f6",
                "primary-dark": "#1d4ed8",
                "accent": "#4f46e5",
                "background-light": "#f0f2f5",
                "background-dark": "#111827",
                "text-light": "#1f2937",
                "text-dark": "#f9fafb",
            },
            fontFamily: {
                display: ["Inter", "sans-serif"],
            }
        },
    },
};
</script>

{% block extra_head %}{% endblock %}
<style>

/* TAMA√ëOS DE FUENTE */
body.font-size-1 { font-size: 12px !important; }
body.font-size-2 { font-size: 14px !important; }
body.font-size-3 { font-size: 16px !important; }
body.font-size-4 { font-size: 18px !important; }
body.font-size-5 { font-size: 20px !important; }

body.font-size-1 h1 { font-size: 1.5rem !important; }
body.font-size-2 h1 { font-size: 1.75rem !important; }
body.font-size-3 h1 { font-size: 2rem !important; }
body.font-size-4 h1 { font-size: 2.25rem !important; }
body.font-size-5 h1 { font-size: 2.5rem !important; }

body.font-size-1 h2 { font-size: 1.3rem !important; }
body.font-size-2 h2 { font-size: 1.5rem !important; }
body.font-size-3 h2 { font-size: 1.75rem !important; }
body.font-size-4 h2 { font-size: 2rem !important; }
body.font-size-5 h2 { font-size: 2.25rem !important; }

body.font-size-1 h3 { font-size: 1.1rem !important; }
body.font-size-2 h3 { font-size: 1.25rem !important; }
body.font-size-3 h3 { font-size: 1.5rem !important; }
body.font-size-4 h3 { font-size: 1.75rem !important; }
body.font-size-5 h3 { font-size: 2rem !important; }

/* ============================= */
/* üî• FIX REAL DEL ALTO CONTRASTE */
/* ============================= */

/* Fondo general */
html.high-contrast-mode,
html.high-contrast-mode body,
body.high-contrast {
    background-color: #000000 !important;
    color: #FFFF00 !important;
}

/* ‚≠ê SOLO TEXTO Y CONTENEDORES ‚Äî NO MEDIA ‚≠ê */
html.high-contrast-mode *:not(img):not(video):not(svg):not(canvas):not(iframe),
body.high-contrast *:not(img):not(video):not(svg):not(canvas):not(iframe) {
    background-color: #000000 !important;
    color: #FFFF00 !important;
}

/* ‚≠ê TODOS LOS BACKGROUNDS A NEGRO (SIN ROMPER PORTADAS) ‚≠ê */
html.high-contrast-mode [class*="bg-"]:not(.course-image),
body.high-contrast [class*="bg-"]:not(.course-image) {
    background-color: #000000 !important;
}

/* NAVBAR Y SIDEBAR */
html.high-contrast-mode nav,
html.high-contrast-mode header,
html.high-contrast-mode aside,
body.high-contrast nav,
body.high-contrast header,
body.high-contrast aside {
    background-color: #000000 !important;
    border: 2px solid #FFFF00 !important;
}

/* BOTONES */
html.high-contrast-mode button,
body.high-contrast button {
    background-color: #FFFF00 !important;
    color: #000000 !important;
    border: 3px solid #FFFFFF !important;
    font-weight: bold !important;
}

html.high-contrast-mode button:hover,
body.high-contrast button:hover {
    background-color: #FFFFFF !important;
    color: #000000 !important;
    border: 3px solid #FFFF00 !important;
}

/* LINKS */
html.high-contrast-mode a,
body.high-contrast a {
    color: #00FFFF !important;
    text-decoration: underline !important;
}

/* FORMULARIOS */
html.high-contrast-mode input,
html.high-contrast-mode select,
html.high-contrast-mode textarea,
body.high-contrast input,
body.high-contrast select,
body.high-contrast textarea {
    background-color: #000000 !important;
    color: #FFFF00 !important;
    border: 2px solid #FFFF00 !important;
}

/* PROGRESS */
html.high-contrast-mode [class*="progress"],
body.high-contrast [class*="progress"] {
    background-color: #1A1A1A !important;
    border: 2px solid #FFFF00 !important;
}
html.high-contrast-mode [class*="progress"] > *,
body.high-contrast [class*="progress"] > * {
    background-color: #FFFF00 !important;
}

/* ICONOS */
html.high-contrast-mode svg,
html.high-contrast-mode .material-symbols-outlined,
body.high-contrast svg,
body.high-contrast .material-symbols-outlined {
    fill: #FFFF00 !important;
    color: #FFFF00 !important;
}

/* FOCUS WCAG */
html.high-contrast-mode *:focus,
body.high-contrast *:focus {
    outline: 3px solid #00FFFF !important;
    outline-offset: 2px !important;
}

/* üö® CLAVE: RESTAURAR IM√ÅGENES üö® */
.high-contrast img,
.high-contrast video {
    background: transparent !important;
    filter: none !important;
}

/* CONTENEDOR DE PORTADAS */
.course-image {
    background: transparent !important;
}

</style>
</head>

<body class="
bg-background-light dark:bg-background-dark
font-display text-text-light dark:text-text-dark
min-h-screen flex flex-col transition-all duration-300
{% if accessibility.high_contrast %}high-contrast high-contrast-mode{% endif %}
font-size-{{ accessibility.font_size|default:'3' }}
">

{% include "components/navbar_student.html" %}
{% block content %}{% endblock %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    const highContrast = {{ accessibility.high_contrast|yesno:"true,false" }};
    if (highContrast) {
        document.documentElement.classList.add('high-contrast-mode');
    }
});
</script>

</body>
</html>
