{% extends "base_student.html" %}
{% load static %}

{% block title %}{{ course.name }}{% endblock %}

{% block extra_head %}
<style>
.active-module-gradient {
    background: linear-gradient(135deg,#2563eb 0%,#3b82f6 100%);
}
</style>
{% endblock %}

{% block content %}

<div class="flex flex-1 overflow-hidden">

<!-- SIDEBAR -->
<aside class="w-80 bg-gray-100 dark:bg-gray-900 border-r p-4 overflow-y-auto">
<h2 class="font-bold mb-4 text-gray-800 dark:text-white">Módulos del curso</h2>

{% for module in modules %}
<a href="{% url 'course_module_detail' offering.id module.id %}">
<div class="p-3 rounded-lg mb-2 cursor-pointer
{% if module.id == active_module.id %}
active-module-gradient text-white
{% else %}
bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700
{% endif %}
">
<p class="text-xs">Módulo {{ module.order }}</p>
<p class="font-semibold">{{ module.title }}</p>
</div>
</a>
{% endfor %}
</aside>

<!-- CONTENT -->
<main class="flex-1 overflow-y-auto">

<div class="bg-white dark:bg-gray-900 p-10 shadow">
<h1 class="text-4xl font-bold mb-3 text-gray-900 dark:text-white">
{{ active_module.title }}
</h1>

<p class="text-gray-600 dark:text-gray-300 max-w-3xl">
{{ active_module.description }}
</p>
</div>

<div class="p-10">

<form method="POST" action="{% url 'complete_module' offering.id active_module.id %}">
{% csrf_token %}
<button class="mb-8 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold shadow-md">
Marcar módulo como completado ✓
</button>
</form>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">

{% for material in materials %}
<div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow">

<h3 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">
{{ material.title }}
</h3>

<p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
Tipo: {{ material.material_type }}
</p>

{% if material.file %}
<a href="{{ material.file.url }}" target="_blank"
   class="bg-blue-600 text-white px-4 py-2 rounded">
Abrir archivo
</a>
{% endif %}

</div>
{% empty %}
<p>No hay materiales en este módulo.</p>
{% endfor %}

</div>
</div>
</main>

</div>

{% endblock %}
